<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hostel Portal</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Roboto:wght@400;500&display=swap');

*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:#fff;overflow:hidden;height:100vh;}
canvas{position:fixed;inset:0;z-index:-1;}

/* LEFT PANEL */
.left-panel{
  position:absolute;
  top:8%;
  left:5%;
  width:45%;
  height:90%;
  color:#000;
  display:flex;
  flex-direction:column;
  gap:20px;
}

.uni-header{display:flex;align-items:center;gap:16px;}
.badge-small{
  width:80px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.25);
}

.uni-text h1{
  font-family:'Playfair Display',serif;
  font-size:48px;
  color:#0d3a80;
  font-weight:900;
}

.uni-text h4,.uni-text p{color:#000;}
.uni-text p.italic{font-style:italic;font-size:14px;}
.uni-text p.orange{font-size:12px;color:orange;font-weight:bold;}

.divider{
  height:2px;
  background:#0d6efd;
  margin:8px 0;
  border:none;
}

.left-text h2,p{color:#000;}

.register-btn{
  padding:14px 24px;
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:16px;
  font-weight:bold;
  cursor:pointer;
  margin-top:12px;
  transition:0.3s;
}

.register-btn:hover{
  background:#0056b3;
  box-shadow:0 0 15px #0d6efd,0 0 25px #0d6efd;
}

/* TOP HEADER ROW */
.top-header-row{
  position:absolute;
  top:2%;
  right:5%;
  display:flex;
  align-items:center;
  gap:12px;
  background:linear-gradient(135deg, rgba(13,110,253,0.12), rgba(0,63,158,0.12));
  backdrop-filter:blur(15px);
  border:1px solid #0d6efd;
  border-radius:30px;
  padding:8px 18px;
  box-shadow:0 4px 15px rgba(13,110,253,0.2);
  z-index:10;
  transition:0.3s;
}

.top-header-row:hover{
  box-shadow:0 6px 20px rgba(13,110,253,0.4);
  transform:translateY(-2px);
}

.email-link{
  display:flex;
  align-items:center;
  gap:5px;
  color:#0d3a80;
  text-decoration:none;
  font-size:11px;
  font-weight:600;
  transition:0.3s;
  padding:4px 8px;
  border-radius:15px;
}

.email-link:hover{
  background:rgba(13,110,253,0.15);
  color:#0d6efd;
  transform:scale(1.05);
}

.email-link i{
  color:#0d6efd;
  font-size:12px;
}

.header-divider{
  width:1px;
  height:18px;
  background:linear-gradient(180deg, transparent, #0d6efd, transparent);
}

.blog-link{
  display:flex;
  align-items:center;
  gap:5px;
  background:linear-gradient(135deg, #0d6efd, #003f9e);
  color:#fff;
  text-decoration:none;
  padding:6px 14px;
  border-radius:20px;
  font-weight:bold;
  font-size:11px;
  transition:0.3s;
  box-shadow:0 2px 8px rgba(13,110,253,0.3);
}

.blog-link:hover{
  transform:scale(1.08);
  box-shadow:0 4px 15px rgba(13,110,253,0.6);
}

/* GLASS CARD */
.glass-card{
  position:absolute;
  right:5%;
  top:50%;
  transform:translateY(-50%);
  width:380px;
  padding:36px;
  border-radius:26px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(8px);
  border:1px solid rgba(0,0,0,0.2);
  box-shadow:0 20px 60px rgba(0,0,0,0.2);
  display:flex;
  flex-direction:column;
  gap:14px;
  transition:0.6s ease, opacity 0.6s ease;
  z-index:2;
}

.glass-card:hover{
  transform:translateY(-50%) scale(1.02);
}

.card-bg{
  position:absolute;
  inset:0;
  background:url('https://i.ibb.co/JWPgCgy8/1b2d9854062216564de42e39e83513aa.jpg') center/cover no-repeat;
  border-radius:26px;
  opacity:0.3;
  pointer-events:none;
}

/* HEADINGS */
.glass-card h2{
  font-family:'Playfair Display',serif;
  font-size:28px;
  text-align:center;
  margin-bottom:20px;
}

/* INPUTS */
input{
  padding:12px;
  border-radius:14px;
  border:1px solid #000;
  background:rgba(255,255,255,0.15);
  transition:0.3s;
}

input:hover{
  transform:scale(1.03);
  background:rgba(255,255,255,0.2);
}

input::placeholder{
  color:rgba(0,0,0,0.5);
}

/* ERROR MESSAGE */
.error-message{
  color:#dc3545;
  font-size:12px;
  text-align:center;
  display:none;
  font-weight:bold;
}

/* BUTTON */
button{
  padding:13px;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,#0d6efd,#003f9e);
  color:#fff;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  transform:scale(1.05);
  box-shadow:0 15px 40px rgba(0,123,255,0.45);
}

button:disabled{
  opacity:0.6;
  cursor:not-allowed;
}

/* LOGIN TOGGLE LINKS */
.toggle-link{
  text-align:center;
  font-size:12px;
  color:#0000EE;
  cursor:pointer;
  margin-top:10px;
  transition:0.3s;
}
.toggle-link:hover{color:#003f9e; text-decoration:underline;}

/* FOOTER NAV */
.footer-nav{
  position:absolute;
  bottom:20px;
  left:5%;
  z-index:10;
}

.footer-nav ul{
  display:flex;
  gap:20px;
  list-style:none;
}

.footer-nav li{
  position:relative;
  padding:10px 15px;
  background:rgba(0,0,0,0.05);
  backdrop-filter:blur(6px);
  border-radius:16px;
  cursor:pointer;
  transition:0.3s;
}

.footer-nav li:first-child{
  box-shadow:0 0 20px #0d6efd,0 0 40px #0d6efd;
}

.footer-nav li:hover{
  box-shadow:0 0 15px #0d6efd,0 0 25px #0d6efd;
}

.footer-nav li i{
  opacity:0;
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  transition:0.25s;
}

.footer-nav li span{
  transition:0.25s;
}

.footer-nav li:hover span{opacity:0;}
.footer-nav li:hover i{opacity:1;}

/* BUILDING IMAGE BOXES */
.image-links{
  display:flex;
  justify-content:flex-start;
  gap:20px;
  margin-top:30px;
}

.building-box{
  position:relative;
  width:150px;
  height:150px;
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  transition:0.3s;
  flex-shrink:0;
}

.building-box img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  transition:0.3s;
}

.building-box .building-name{
  position:absolute;
  bottom:0;
  width:100%;
  text-align:center;
  background:rgba(13,58,128,0.7);
  color:#fff;
  font-size:12px;
  padding:4px 0;
  opacity:0;
  transition:0.3s;
}

.building-box:hover img{
  transform:scale(1.05);
  box-shadow:0 0 20px rgba(13,58,128,0.6);
  z-index:2;
}

.building-box:hover .building-name{
  opacity:1;
}

/* COPYRIGHT & PRIVACY */
.copyright-box{
  position:absolute;
  right:5%;
  bottom:20px;
  width:380px;
  padding:12px 20px;
  border-radius:20px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(12px);
  border:1px solid rgba(0,0,0,0.2);
  text-align:center;
  font-size:12px;
  color:#000;
  box-shadow:0 10px 30px rgba(0,123,255,0.2);
  transition:0.3s;
  z-index:2;
}

.copyright-box:hover{
  box-shadow:0 0 20px #0d6efd,0 0 40px #0d6efd;
  transform:scale(1.02);
}

.copyright-box a{
  color:#0d6efd;
  text-decoration:none;
  font-weight:bold;
}
</style>
</head>

<body>

<canvas id="grid"></canvas>

<!-- LEFT PANEL -->
<div class="left-panel">
  <div class="uni-header">
    <img src="https://i.ibb.co/HL3qVtZY/uet-lahore-Logo-PNG-Vector-CDR-Free-Download.jpg" class="badge-small">
    <div class="uni-text">
      <h1>U E T</h1>
      <h4>UNIVERSITY OF ENGINEERING & TECHNOLOGY, LAHORE</h4>
      <p class="orange">The Best Way to predict your future is to create it - 104 years of excellence</p>
    </div>
  </div>

  <hr class="divider">

  <div class="left-text">
    <marquee scrollamount="6">
      All old and new hostelites of University of Engineering & Technology must register themselves on this website
    </marquee>

    <hr class="divider">

    <h2>WELCOME TO HOSTELMATE - your own hostel partner</h2>
    <p>Making life easier for hostelites of UET</p>
    <p>Because we care for your comfort</p>

    <button class="register-btn" onclick="window.location.href='register.html'">Register Here</button>
    <button class="register-btn" onclick="window.location.href='admin-register.html'">Admin Registration</button>

    <div class="image-links">
      <a href="https://ibb.co/fGZYXWjx" class="building-box">
        <img src="https://i.ibb.co/84GDmw17/9328ed4d62c97b0d703198809d082e09.jpg">
        <div class="building-name">UET MAIN AUDITORIUM</div>
      </a>
      <a href="https://imgbb.com/" class="building-box">
        <img src="https://i.ibb.co/pvZYy5S7/1-Xq09x8-Mn5-Tp-MD3-AJ7t1-GNg.jpg">
        <div class="building-name">IB&M</div>
      </a>
      <a href="https://ibb.co/gZ3v500x" class="building-box">
        <img src="https://i.ibb.co/SwPQhkkz/1706592674249.jpg">
        <div class="building-name">NATIONAL LIBRARY</div>
      </a>
    </div>
  </div>
</div>

<!-- TOP HEADER ROW -->
<div class="top-header-row">
  <a href="mailto:HostelMateofficial@gmail.com" class="email-link">
    <i class="fas fa-envelope"></i>
    HostelMateofficial@gmail.com
  </a>
  
  <div class="header-divider"></div>
  
  <a href="mailto:hostelmate.uet@outlook.com" class="email-link">
    <i class="fas fa-envelope"></i>
    hostelmate.uet@outlook.com
  </a>
  
  <div class="header-divider"></div>
  
  <a href="blog.html" class="blog-link">
    <i class="fas fa-blog"></i>
    Visit Our Blog
  </a>
</div>

<!-- LOGIN CARDS CONTAINER -->
<div id="loginContainer">

  <!-- STUDENT LOGIN -->
  <div class="glass-card" id="studentLogin">
    <div class="card-bg"></div>
    <h2>Welcome Back!</h2>

    <input type="text" placeholder="Student Name *" id="studentNameInput" required>
    <input type="text" placeholder="Roll No (e.g., 2024-CS-001) *" id="studentRollNoInput" required>
    <input type="email" placeholder="Email *" id="studentEmailInput" required>
    <input type="password" placeholder="Password *" id="studentPasswordInput" required>
    <div class="error-message" id="studentError">Please fill all fields!</div>
    <button id="studentLoginBtn" onclick="loginStudent()">Login</button>
    <div class="toggle-link" onclick="showAdminLogin()">Not a student? Go to admin login</div>
  </div>

  <!-- ADMIN LOGIN -->
  <div class="glass-card" id="adminLogin" style="opacity:0;pointer-events:none;position:absolute;top:50%;right:5%;transform:translateY(-50%);">
    <div class="card-bg"></div>
    <h2>Admin Login</h2>

    <input type="text" placeholder="Name *" id="adminNameInput" required>
    <input type="text" placeholder="Your Hostel Code *" id="adminCodeInput" required>
    <input type="email" placeholder="Email *" id="adminEmailInput" required>
    <input type="password" placeholder="Password *" id="adminPasswordInput" required>
    <div class="error-message" id="adminError">Please fill all fields!</div>
    <button id="adminLoginBtn" onclick="loginAdmin()">Login</button>
    <div class="toggle-link" onclick="showStudentLogin()">Not an admin? Go back to student login</div>
  </div>

</div>

<!-- FOOTER NAV -->
<div class="footer-nav">
  <ul>
    <li onclick="window.location.href='index.html'"><i class="fas fa-home"></i><span>Home</span></li>
    <li onclick="window.location.href='about.html'"><i class="fas fa-info-circle"></i><span>About</span></li>
    <li onclick="window.location.href='contact.html'"><i class="fas fa-phone"></i><span>Contact</span></li>
    <li onclick="window.location.href='gallery.html'"><i class="fas fa-image"></i><span>Gallery</span></li>
    <li onclick="window.location.href='faq.html'"><i class="fas fa-question-circle"></i><span>FAQ</span></li>
  </ul>
</div>

<!-- COPYRIGHT -->
<div class="copyright-box">
  Â© 2025 HostelMate. All Rights Reserved |
  <a href="privacy.html">Privacy Policy</a>
</div>

<!-- FIREBASE SCRIPTS -->
<script type="module">
  // Import Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBAeUoj-jOOv1dHFf3r98K44GeGhJnE1T8",
    authDomain: "hostelmate-na2715.firebaseapp.com",
    projectId: "hostelmate-na2715",
    storageBucket: "hostelmate-na2715.firebasestorage.app",
    messagingSenderId: "322572880442",
    appId: "1:322572880442:web:87c7273991016f80e2c303",
    measurementId: "G-RFSWJL3ZDM"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // STUDENT LOGIN WITH FIREBASE
  window.loginStudent = async function(){
    const name = document.getElementById('studentNameInput').value.trim();
    const rollNo = document.getElementById('studentRollNoInput').value.trim();
    const email = document.getElementById('studentEmailInput').value.trim();
    const password = document.getElementById('studentPasswordInput').value.trim();
    const errorMsg = document.getElementById('studentError');
    const btn = document.getElementById('studentLoginBtn');

    // Validate fields
    if (!name || !rollNo || !email || !password) {
      errorMsg.textContent = 'Please fill all fields!';
      errorMsg.style.display = 'block';
      if (!name) document.getElementById('studentNameInput').style.borderColor = '#dc3545';
      if (!rollNo) document.getElementById('studentRollNoInput').style.borderColor = '#dc3545';
      if (!email) document.getElementById('studentEmailInput').style.borderColor = '#dc3545';
      if (!password) document.getElementById('studentPasswordInput').style.borderColor = '#dc3545';
      return;
    }

    // Disable button and show loading
    btn.disabled = true;
    btn.textContent = 'Logging in...';
    errorMsg.style.display = 'none';

    try {
      // Query Firestore - using rollNo as document ID
      const q = query(
        collection(db, "students"),
        where("rollNo", "==", rollNo),
        where("email", "==", email),
        where("password", "==", password)
      );

      const querySnapshot = await getDocs(q);

      if (!querySnapshot.empty) {
        // Login successful - get student data
        const studentData = querySnapshot.docs[0].data();
        
        // Verify name matches
        if (studentData.name.toLowerCase() !== name.toLowerCase()) {
          errorMsg.textContent = 'Student name does not match records!';
          errorMsg.style.display = 'block';
          btn.disabled = false;
          btn.textContent = 'Login';
          return;
        }
        
        // Store in sessionStorage
        sessionStorage.setItem("studentName", studentData.name);
        sessionStorage.setItem("studentEmail", studentData.email);
        sessionStorage.setItem("studentId", querySnapshot.docs[0].id);
        sessionStorage.setItem("studentRollNo", studentData.rollNo);
        
        // Redirect to student dashboard
        window.location.href = "login.html";
      } else {
        // No matching credentials
        errorMsg.textContent = 'Invalid credentials! Please check your details.';
        errorMsg.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Login';
      }
    } catch (error) {
      console.error("Login error:", error);
      errorMsg.textContent = 'Login failed. Please try again.';
      errorMsg.style.display = 'block';
      btn.disabled = false;
      btn.textContent = 'Login';
    }
  }

  // ADMIN LOGIN WITH FIREBASE
  window.loginAdmin = async function(){
    const email = document.getElementById('adminEmailInput').value.trim();
    const password = document.getElementById('adminPasswordInput').value.trim();
    const errorMsg = document.getElementById('adminError');
    const btn = document.getElementById('adminLoginBtn');

    // Validate fields
    if (!email || !password) {
      errorMsg.textContent = 'Please fill all fields!';
      errorMsg.style.display = 'block';
      if (!email) document.getElementById('adminEmailInput').style.borderColor = '#dc3545';
      if (!password) document.getElementById('adminPasswordInput').style.borderColor = '#dc3545';
      return;
    }

    // Disable button and show loading
    btn.disabled = true;
    btn.textContent = 'Logging in...';
    errorMsg.style.display = 'none';

    try {
      // Query Firestore for matching admin
      const q = query(
        collection(db, "admins"),
        where("email", "==", email),
        where("password", "==", password)
      );

      const querySnapshot = await getDocs(q);

      if (!querySnapshot.empty) {
        // Login successful - get admin data
        const adminData = querySnapshot.docs[0].data();
        
        // Store in sessionStorage
        sessionStorage.setItem("adminName", adminData.fullName);
        sessionStorage.setItem("adminEmail", adminData.email);
        sessionStorage.setItem("adminId", querySnapshot.docs[0].id);
        sessionStorage.setItem("hostelCode", adminData.hostelCode);
        
        // Redirect to admin dashboard
        window.location.href = "admin-dashboard.html";
      } else {
        // No matching credentials
        errorMsg.textContent = 'Invalid email or password!';
        errorMsg.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Login';
      }
    } catch (error) {
      console.error("Login error:", error);
      errorMsg.textContent = 'Login failed. Please try again.';
      errorMsg.style.display = 'block';
      btn.disabled = false;
      btn.textContent = 'Login';
    }
  }

  // Reset border color on input
  document.querySelectorAll('input').forEach(input => {
    input.addEventListener('input', function() {
      this.style.borderColor = '#000';
      const form = this.closest('.glass-card');
      const errorMsg = form.querySelector('.error-message');
      if (errorMsg) errorMsg.style.display = 'none';
    });
  });

  // TOGGLE LOGIN CARDS
  window.showAdminLogin = function(){
    const studentCard = document.getElementById('studentLogin');
    const adminCard = document.getElementById('adminLogin');

    studentCard.style.opacity = 0;
    studentCard.style.pointerEvents = "none";

    adminCard.style.opacity = 1;
    adminCard.style.pointerEvents = "auto";
    
    document.getElementById('studentError').style.display = 'none';
  }

  window.showStudentLogin = function(){
    const studentCard = document.getElementById('studentLogin');
    const adminCard = document.getElementById('adminLogin');

    studentCard.style.opacity = 1;
    studentCard.style.pointerEvents = "auto";

    adminCard.style.opacity = 0;
    adminCard.style.pointerEvents = "none";
    
    document.getElementById('adminError').style.display = 'none';
  }
</script>

<script>
// 3D Grid Background
const canvas=document.getElementById("grid");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

let mouse={x:-1000,y:-1000};
window.addEventListener("mousemove",e=>{
  mouse.x=e.clientX;
  mouse.y=e.clientY;
});

const spacing=40;
const influence=180;

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for(let x=0;x<canvas.width;x+=spacing){
    for(let y=0;y<canvas.height;y+=spacing){
      const dx=mouse.x-x;
      const dy=mouse.y-y;
      const dist=Math.sqrt(dx*dx+dy*dy);

      if(dist<influence){
        const alpha=1-dist/influence;
        ctx.strokeStyle=`rgba(0,0,0,${alpha*0.35})`;

        ctx.beginPath();
        ctx.moveTo(x-spacing/2,y);
        ctx.lineTo(x+spacing/2,y);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(x,y-spacing/2);
        ctx.lineTo(x,y+spacing/2);
        ctx.stroke();
      }
    }
  }
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>